# 58同城北京二手房爬虫

这是一个用于爬取58同城北京二手房信息的Python爬虫脚本。

## 功能特点

- ✅ 自动爬取58同城北京二手房信息
- ✅ 提取房源标题、价格、位置、面积、房型等信息
- ✅ 支持多页爬取
- ✅ 反爬虫处理（User-Agent、请求延迟等）
- ✅ 数据保存为CSV和JSON格式
- ✅ 错误处理和重试机制

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

直接运行脚本：

```bash
python spider_58.py
```

默认会爬取5页数据，可以在代码中修改 `max_pages` 参数。

## 输出文件

- `houses_58.csv` - CSV格式的房源数据
- `houses_58.json` - JSON格式的房源数据
- `debug_page_*.html` - 如果解析失败，会保存原始HTML用于调试

## 注意事项

1. **反爬虫机制**：58同城有反爬虫机制，脚本已添加：
   - 随机User-Agent
   - 请求延迟（1-3秒）
   - 页面间延迟（3-6秒）

2. **验证码**：如果遇到验证码，脚本会等待更长时间后重试。如果频繁遇到验证码，建议：
   - 增加延迟时间
   - 减少爬取页数
   - 使用代理IP

3. **页面结构变化**：如果网站页面结构发生变化，可能需要调整选择器。查看 `debug_page_*.html` 文件可以帮助调试。

4. **合法使用**：请遵守网站的robots.txt和使用条款，不要过度频繁地请求，避免对服务器造成压力。

## 数据结构

每条房源信息包含以下字段：

- `title` - 房源标题
- `price` - 价格（万元）
- `location` - 位置/地址
- `area` - 面积（平方米）
- `room_type` - 房型（如：2室1厅）
- `floor` - 楼层信息
- `year` - 建造年份
- `url` - 房源详情页链接

## 故障排除

如果爬取失败：

1. 检查网络连接
2. 查看是否有验证码（脚本会自动处理）
3. 检查 `debug_page_*.html` 文件，确认页面结构
4. 可能需要更新选择器以适应新的页面结构



