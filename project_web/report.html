<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>数据报告 - 房产数据分析系统</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <!-- ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/report.css">
</head>
<body>
  <div class="report-page">
    <!-- 顶部导航 -->
    <header class="header">
      <div class="header-content">
        <div class="header-logo">
          <span class="logo-icon">🏠</span>
          <span>房析</span>
        </div>
        
        <nav class="header-nav">
          <a href="index.html" class="header-nav-item">
            <i data-lucide="home"></i>
            <span>首页</span>
          </a>
          <a href="beijing.html" class="header-nav-item">
            <i data-lucide="building"></i>
            <span>北京分析</span>
          </a>
          <a href="report.html" class="header-nav-item active">
            <i data-lucide="file-text"></i>
            <span>数据报告</span>
          </a>
          <a href="settings.html" class="header-nav-item">
            <i data-lucide="settings"></i>
            <span>设置</span>
          </a>
        </nav>
        
        <div class="header-actions">
          <button class="btn btn-secondary btn-sm" id="userBtn">
            <i data-lucide="user"></i>
            <span id="userDisplay">用户</span>
          </button>
          <button class="btn btn-outline btn-sm" id="logoutBtn">退出</button>
        </div>
      </div>
    </header>
    
    <!-- 页面横幅 -->
    <section class="page-banner">
      <div class="banner-content">
        <h1 class="page-title">
          <i data-lucide="file-text"></i>
          数据报告中心
        </h1>
        <p class="page-subtitle">专业的房产市场分析报告，助您深度了解市场动态</p>
      </div>
    </section>
    
    <!-- 主内容区 -->
    <main class="report-main">
      <!-- 报告类型选择 -->
      <div class="report-types">
        <div class="report-type-card" data-type="market">
          <div class="type-icon">
            <i data-lucide="trending-up"></i>
          </div>
          <h3 class="type-title">市场趋势报告</h3>
          <p class="type-desc">全国及重点城市房价走势分析</p>
          <span class="type-badge">热门</span>
        </div>
        
        <div class="report-type-card" data-type="city">
          <div class="type-icon">
            <i data-lucide="map-pin"></i>
          </div>
          <h3 class="type-title">城市分析报告</h3>
          <p class="type-desc">单一城市深度市场分析</p>
        </div>
        
        <div class="report-type-card" data-type="compare">
          <div class="type-icon">
            <i data-lucide="git-compare"></i>
          </div>
          <h3 class="type-title">城市对比报告</h3>
          <p class="type-desc">多城市横向对比分析</p>
        </div>
        
        <div class="report-type-card" data-type="investment">
          <div class="type-icon">
            <i data-lucide="piggy-bank"></i>
          </div>
          <h3 class="type-title">投资价值报告</h3>
          <p class="type-desc">房产投资回报率分析</p>
          <span class="type-badge pro">Pro</span>
        </div>
      </div>
      
      <!-- 最新报告列表 -->
      <div class="report-section">
        <div class="section-header">
          <h2 class="section-title">
            <i data-lucide="clock"></i>
            最新报告
          </h2>
          <a href="#" class="view-all">查看全部 <i data-lucide="chevron-right"></i></a>
        </div>
        
        <div class="report-list">
          <div class="report-item">
            <div class="report-cover">
              <i data-lucide="file-bar-chart"></i>
            </div>
            <div class="report-info">
              <h4 class="report-title">2024年12月全国房价月度报告</h4>
              <p class="report-meta">
                <span><i data-lucide="calendar"></i> 2024-12-10</span>
                <span><i data-lucide="eye"></i> 1,234 次查看</span>
              </p>
              <div class="report-tags">
                <span class="tag tag-primary">月度报告</span>
                <span class="tag">全国</span>
              </div>
            </div>
            <div class="report-actions">
              <button class="btn btn-primary btn-sm">
                <i data-lucide="download"></i>
                下载
              </button>
              <button class="btn btn-secondary btn-sm">
                <i data-lucide="eye"></i>
                预览
              </button>
            </div>
          </div>
          
          <div class="report-item">
            <div class="report-cover">
              <i data-lucide="file-bar-chart"></i>
            </div>
            <div class="report-info">
              <h4 class="report-title">北京市2024年Q4房产市场深度分析</h4>
              <p class="report-meta">
                <span><i data-lucide="calendar" style="width: 14px; height: 14px;"></i> 2024-12-08</span>
                <span><i data-lucide="eye" style="width: 14px; height: 14px;"></i> 2,567 次查看</span>
              </p>
              <div class="report-tags">
                <span class="tag tag-primary">季度报告</span>
                <span class="tag">北京</span>
              </div>
            </div>
            <div class="report-actions">
              <button class="btn btn-primary btn-sm">
                <i data-lucide="download" style="width: 14px; height: 14px;"></i>
                下载
              </button>
              <button class="btn btn-secondary btn-sm">
                <i data-lucide="eye" style="width: 14px; height: 14px;"></i>
                预览
              </button>
            </div>
          </div>
          
          <div class="report-item">
            <div class="report-cover">
              <i data-lucide="file-bar-chart"></i>
            </div>
            <div class="report-info">
              <h4 class="report-title">一线城市房价对比分析报告</h4>
              <p class="report-meta">
                <span><i data-lucide="calendar"></i> 2024-12-05</span>
                <span><i data-lucide="eye"></i> 3,891 次查看</span>
              </p>
              <div class="report-tags">
                <span class="tag tag-primary">对比分析</span>
                <span class="tag">北上广深</span>
              </div>
            </div>
            <div class="report-actions">
              <button class="btn btn-primary btn-sm">
                <i data-lucide="download"></i>
                下载
              </button>
              <button class="btn btn-secondary btn-sm">
                <i data-lucide="eye"></i>
                预览
              </button>
            </div>
          </div>
          
          <div class="report-item">
            <div class="report-cover">
              <i data-lucide="file-bar-chart"></i>
            </div>
            <div class="report-info">
              <h4 class="report-title">2024年新一线城市投资价值报告</h4>
              <p class="report-meta">
                <span><i data-lucide="calendar" style="width: 14px; height: 14px;"></i> 2024-12-01</span>
                <span><i data-lucide="eye" style="width: 14px; height: 14px;"></i> 5,123 次查看</span>
              </p>
              <div class="report-tags">
                <span class="tag tag-warning">Pro</span>
                <span class="tag">投资分析</span>
              </div>
            </div>
            <div class="report-actions">
              <button class="btn btn-primary btn-sm">
                <i data-lucide="download" style="width: 14px; height: 14px;"></i>
                下载
              </button>
              <button class="btn btn-secondary btn-sm">
                <i data-lucide="eye" style="width: 14px; height: 14px;"></i>
                预览
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 生成自定义报告 -->
      <div class="custom-report-section">
        <div class="custom-report-card">
          <div class="custom-icon">
            <i data-lucide="wand-2"></i>
          </div>
          <div class="custom-content">
            <h3>生成自定义报告</h3>
            <p>选择城市、时间范围和分析维度，一键生成专属报告</p>
          </div>
          <button class="btn btn-primary btn-lg">
            <i data-lucide="plus" style="width: 18px; height: 18px;"></i>
            创建报告
          </button>
        </div>
      </div>
      
      <!-- 报告详情区域 -->
      <div class="report-detail" id="report-detail" style="display: none;">
        <div class="detail-header">
          <h2 class="detail-title">报告标题</h2>
          <p class="detail-meta">
            <span><i data-lucide="calendar"></i> 2024-12-10</span>
            <span><i data-lucide="eye"></i> 1,234 次查看</span>
          </p>
        </div>
        
        <div class="detail-content">
          <p>报告内容摘要，包含主要发现和数据指标。</p>
          <div class="detail-chart" id="detail-chart" style="height: 400px;"></div>
        </div>
        
        <div class="detail-actions">
          <button class="btn-share">
            <i class="fas fa-share-alt"></i>
            分享
          </button>
        </div>
        
        <div class="detail-footer">
          <button class="btn btn-secondary" id="backBtn">
            <i data-lucide="arrow-left"></i>
            返回报告列表
          </button>
        </div>
      </div>
      
      <!-- 在报告类型选择区域后添加未登录提示 -->
      <div class="report-types">
        <!-- 报告类型卡片由 JS 动态生成 -->
      </div>

      <!-- ✅ 添加未登录用户功能提示 -->
      <div class="guest-notice" id="guestNotice" style="display: none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin: 20px 0; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
          <div style="display: flex; align-items: center; gap: 15px;">
              <i data-lucide="info" style="width: 24px; height: 24px; flex-shrink: 0;"></i>
              <div style="flex: 1;">
                  <h4 style="margin: 0 0 8px 0; font-size: 16px;">您正在以访客身份浏览</h4>
                  <p style="margin: 0; opacity: 0.9; font-size: 14px;">登录后可生成自定义报告并查看历史报告</p>
              </div>
              <a href="login.html" style="background: white; color: #667eea; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: 500; white-space: nowrap; transition: transform 0.2s;">
                  立即登录
              </a>
          </div>
      </div>

      <script>
      // ✅ 根据登录状态显示/隐藏访客提示
      document.addEventListener('DOMContentLoaded', function() {
          const isLoggedIn = !!localStorage.getItem('token');
          const guestNotice = document.getElementById('guestNotice');
          
          if (!isLoggedIn && guestNotice) {
              guestNotice.style.display = 'block';
          }
      });
      </script>
    </main>
    
    <!-- 页脚 -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-info">
          <span class="footer-logo">🏠 房析</span>
          <span class="footer-copyright">© 2024 房产数据分析系统. All rights reserved.</span>
        </div>
        <div class="footer-links">
          <a href="#">关于我们</a>
          <a href="#">使用条款</a>
          <a href="#">隐私政策</a>
          <a href="#">联系我们</a>
        </div>
      </div>
    </footer>
  </div>
  
  <!-- Scripts -->
  <script src="js/mock-data.js"></script>
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/report.js"></script>
</body>
</html>

