# ğŸ  æˆ¿äº§æ•°æ®åˆ†æç³»ç»Ÿ - å‰ç«¯å¼€å‘è®¡åˆ’

> **é¡¹ç›®åç§°**: å…¨å›½æˆ¿äº§æ•°æ®å¯è§†åŒ–åˆ†æå¹³å°  
> **å‰ç«¯æŠ€æœ¯æ ˆ**: HTML5 + CSS3 + JavaScript  
> **åç«¯æŠ€æœ¯æ ˆ**: Flask (Python)  
> **é€šä¿¡æ–¹å¼**: RESTful API + JSON  
> **æ›´æ–°æ—¥æœŸ**: 2024-12-10

---

## ğŸš€ å¼€å‘è¿›åº¦æ€»è§ˆ

| æ¨¡å— | è¿›åº¦ | çŠ¶æ€ |
|-----|------|------|
| åŸºç¡€æ¡†æ¶ | 100% | âœ… å·²å®Œæˆ |
| ç™»å½•é¡µé¢ | 100% | âœ… å·²å®Œæˆ |
| æ³¨å†Œé¡µé¢ | 100% | âœ… å·²å®Œæˆ |
| ä¸»é¡µ(å…¨å›½æ€»è§ˆ) | 100% | âœ… å·²å®Œæˆ |
| åŒ—äº¬åˆ†æé¡µ | 100% | âœ… å·²å®Œæˆ |
| æ•°æ®æŠ¥å‘Šé¡µ | 100% | âœ… å·²å®Œæˆ |
| æˆ‘çš„æ”¶è—é¡µ | 100% | âœ… å·²å®Œæˆ |
| è®¾ç½®é¡µé¢ | 100% | âœ… å·²å®Œæˆ |
| APIæ¥å£å°è£… | 100% | âœ… å·²å®Œæˆ (50ä¸ªæ¥å£) |
| è§†è§‰ä¼˜åŒ– | 100% | âœ… å·²å®Œæˆ |
| å‰åç«¯è”è°ƒ | 10% | ğŸ”„ è¿›è¡Œä¸­ |

### ğŸ¯ å½“å‰çŠ¶æ€: **å…¨éƒ¨7ä¸ªé¡µé¢å¼€å‘å®Œæˆï¼ŒAPIæ¥å£å·²å…¨éƒ¨è°ƒç”¨ï¼Œç­‰å¾…åç«¯è”è°ƒ**

---

## ğŸ“Š æ•°æ®åº“å­—æ®µå‚è€ƒ

> âš ï¸ ä»¥ä¸‹æ•°æ®ä»…ä¾›å‚è€ƒï¼Œå®é™…æ•°æ®é€šè¿‡ API æ¥å£è·å–

### è¡¨1: åŒ—äº¬æˆ¿æºè¯¦æƒ… (beijing_house_info)

| å­—æ®µå | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|-------|------|------|------|
| `house_id` | INT | æˆ¿æºID | 1 |
| `total_price` | FLOAT | æ€»ä»·(ä¸‡å…ƒ) | 310.00 |
| `price_per_sqm` | FLOAT | å•ä»·(å…ƒ/ã¡) | 35001 |
| `area` | FLOAT | é¢ç§¯(ã¡) | 88.57 |
| `layout` | VARCHAR | æˆ·å‹ | "2å®¤1å…" |
| `orientation` | VARCHAR | æœå‘ | "å—" |
| `floor` | INT | æ¥¼å±‚ | 2 |
| `has_elevator` | VARCHAR | æ˜¯å¦æœ‰ç”µæ¢¯ | "æœ‰ç”µæ¢¯" |
| `build_year` | VARCHAR | å»ºç­‘å¹´ä»£ | "2010" |
| `community` | VARCHAR | å°åŒºåç§° | "æœ›äº¬è¥¿å›­" |
| `region` | VARCHAR | è¡Œæ”¿åŒº | "æœé˜³" |
| `business_area` | VARCHAR | å•†åœˆ | "æœ›äº¬" |
| `location` | VARCHAR | ä½ç½® | "æœé˜³åŒºæœ›äº¬..." |
| `tags` | VARCHAR | æ ‡ç­¾ | "ç²¾è£… å—" |

### è¡¨2: å…¨å›½åŸå¸‚æˆ¿ä»· (current_price)

| å­—æ®µå | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|-------|------|------|------|
| `province_name` | VARCHAR | çœä»½ | "åŒ—äº¬" |
| `city_name` | VARCHAR | åŸå¸‚ | "åŒ—äº¬" |
| `city_avg_price` | INT | åŸå¸‚å‡ä»·(å…ƒ/ã¡) | 65000 |
| `city_avg_total_price` | INT | åŸå¸‚å¹³å‡æ€»ä»·(ä¸‡) | 450 |
| `price_rent_ratio` | INT | ç§Ÿå”®æ¯” | 55 |
| `listing_count` | INT | æŒ‚ç‰Œæ•°é‡ | 5000 |
| `district_name` | VARCHAR | åŒºå¿å | "æµ·æ·€åŒº" |
| `district_avg_price` | INT | åŒºå¿å‡ä»· | 78000 |
| `district_ratio` | FLOAT | åŒºå¿æ¶¨è·Œæ¯”(%) | 2.5 |

### è¡¨3: ä»·æ ¼è¶‹åŠ¿ (price_trend)

| å­—æ®µå | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|-------|------|------|------|
| `city_name` | VARCHAR | åŸå¸‚å | "åŒ—äº¬" |
| `year` | INT | å¹´ä»½ | 2024 |
| `year_avg_price` | FLOAT | å¹´å‡ä»· | 65000 |
| `month` | INT | æœˆä»½ | 12 |
| `month_avg_price` | FLOAT | æœˆå‡ä»· | 64500 |

---

## ğŸ“‹ é¡µé¢åŠŸèƒ½è§„æ ¼

### 1ï¸âƒ£ ç™»å½•é¡µé¢ (Login Page)

**å®šä½**: ç³»ç»Ÿå…¥å£ï¼Œèº«ä»½éªŒè¯é—¨æˆ·

#### åŠŸèƒ½éœ€æ±‚

| æ¨¡å— | åŠŸèƒ½ç‚¹ | ä¼˜å…ˆçº§ | å¤‡æ³¨ |
|-----|--------|-------|------|
| ç”¨æˆ·åè¾“å…¥ | æ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ”¯æŒæ‰‹æœºå·/é‚®ç®±/ç”¨æˆ·åæ ¼å¼ | P0 | å¿…å¡«å­—æ®µ |
| å¯†ç è¾“å…¥ | å¯†ç è¾“å…¥æ¡†ï¼Œæ”¯æŒæ˜¾ç¤º/éšè—åˆ‡æ¢ | P0 | å¿…å¡«å­—æ®µ |
| ç™»å½•æŒ‰é’® | ç‚¹å‡»åè°ƒç”¨ç™»å½•æ¥å£ï¼ŒæˆåŠŸè·³è½¬ä¸»é¡µ | P0 | éœ€åç«¯éªŒè¯ |
| è®°ä½æˆ‘ | å¯é€‰å¤é€‰æ¡†ï¼Œå­˜å‚¨ Token | P2 | å¯é€‰åŠŸèƒ½ |
| é¡µé¢ç¾åŒ– | ç°ä»£åŒ– UI è®¾è®¡ï¼Œå“åº”å¼å¸ƒå±€ | P1 | è§†è§‰è¦æ±‚ |

#### äº¤äº’æµç¨‹

```
ç”¨æˆ·è¾“å…¥ â†’ ç‚¹å‡»ç™»å½• â†’ è°ƒç”¨ /api/auth/login â†’ è·å– Token â†’ å­˜å‚¨ LocalStorage â†’ è·³è½¬ä¸»é¡µ
```

---

### 2ï¸âƒ£ ä¸»é¡µï¼šå…¨å›½æˆ¿äº§æ•°æ®æ€»è§ˆ (National Overview Page)

**å®šä½**: å®è§‚æ•°æ®å±•ç¤ºï¼Œå…¨å›½æˆ¿ä»·ä¸€è§ˆ

#### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

##### ğŸ—ºï¸ A. å…¨å›½æˆ¿ä»·åœ°å›¾å¯è§†åŒ–

| åŠŸèƒ½ç‚¹ | æè¿° | å…³è”æ¥å£ | ä¼˜å…ˆçº§ |
|-------|------|---------|-------|
| ä¸­å›½åœ°å›¾å±•ç¤º | SVG/Canvas æ¸²æŸ“ä¸­å›½åœ°å›¾ | - | P0 |
| åˆ†çº§è®¾è‰² | æ ¹æ®æˆ¿ä»·é«˜ä½æ˜¾ç¤ºä¸åŒé¢œè‰² | `/api/national/city-prices` | P0 |
| æ‚¬åœæç¤º | é¼ æ ‡æ‚¬åœæ˜¾ç¤ºåŸå¸‚è¯¦æƒ… | åŒä¸Š | P0 |
| ç‚¹å‡»è·³è½¬ | ç‚¹å‡»åŒ—äº¬è·³è½¬è‡³åŒ—äº¬è¯¦æƒ…é¡µ | - | P1 |

##### ğŸ“ˆ B. æ ¸å¿ƒæ•°æ®æŒ‡æ ‡å¡ç‰‡

| æŒ‡æ ‡ | å…³è”æ¥å£ | è¿”å›å­—æ®µ |
|-----|---------|---------|
| å…¨å›½å¹³å‡æˆ¿ä»· | `/api/national/overview` | `national_avg_price` |
| æœ€é«˜æˆ¿ä»·åŸå¸‚ | `/api/national/overview` | `highest_city` |
| æœ€ä½æˆ¿ä»·åŸå¸‚ | `/api/national/overview` | `lowest_city` |
| æ€»æŒ‚ç‰Œæˆ¿æºæ•° | `/api/national/overview` | `total_listings` |

##### ğŸ“Š C. çœä»½/åŸå¸‚æ’è¡Œæ¦œ

| åŠŸèƒ½ | å…³è”æ¥å£ |
|-----|---------|
| TOP 10 æˆ¿ä»·æ’è¡Œ | `/api/national/ranking?type=price&limit=10` |
| æ¶¨è·Œå¹…æ’è¡Œ | `/api/national/ranking?type=change&limit=10` |
| ç§Ÿå”®æ¯”æ’è¡Œ | `/api/national/ranking?type=rent_ratio&limit=10` |

##### ğŸ”§ D. ç­›é€‰ä¸äº¤äº’

| åŠŸèƒ½ | å…³è”æ¥å£ |
|-----|---------|
| çœä»½ä¸‹æ‹‰ç­›é€‰ | `/api/national/provinces` |
| ä»·æ ¼åŒºé—´ç­›é€‰ | `/api/national/city-prices?min=X&max=Y` |
| æœç´¢æ¡† | `/api/national/search?keyword=XX` |

##### ğŸ¦¶ E. åº•éƒ¨å¯¼èˆªæ 

| æŒ‰é’® | è·³è½¬ç›®æ ‡ |
|-----|---------|
| é¦–é¡µ | å½“å‰é¡µé¢é«˜äº® |
| æ•°æ®æŠ¥å‘Š | /report.html (å ä½) |
| æˆ‘çš„æ”¶è— | /favorites.html (å ä½) |
| è®¾ç½® | /settings.html (å ä½) |

---

### 3ï¸âƒ£ åŒ—äº¬é¡µé¢ï¼šæ·±åº¦åœ°åŒºåˆ†æ (Beijing Analysis Page)

**å®šä½**: ç²¾ç»†åŒ–æ•°æ®åˆ†æ + AI æ™ºèƒ½æœåŠ¡

#### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

##### ğŸ˜ï¸ A. åŒºåŸŸæˆ¿ä»·å¯¹æ¯”åˆ†æ

| åŠŸèƒ½ç‚¹ | æè¿° | å…³è”æ¥å£ |
|-------|------|---------|
| è¡Œæ”¿åŒºæ’å | å„åŒºå‡ä»·æ’è¡Œæ¦œ | `/api/beijing/district-ranking` |
| ç¯æ¯”å˜åŒ– | å„åŒºä»·æ ¼æ¶¨è·ŒæŸ±çŠ¶å›¾ | `/api/beijing/district-change` |
| åŒºåŸŸåœ°å›¾ | åŒ—äº¬è¡Œæ”¿åŒºçƒ­åŠ›å›¾ | `/api/beijing/district-prices` |

##### ğŸ“ B. ç‰¹å¾å…³è”åˆ†æ

| åˆ†æç»´åº¦ | å…³è”æ¥å£ | è¿”å›æ•°æ® |
|---------|---------|---------|
| æ¥¼å±‚ä¸æˆ¿ä»· | `/api/beijing/analysis/floor` | ä½/ä¸­/é«˜æ¥¼å±‚å‡ä»·å¯¹æ¯” |
| æˆ·å‹ä¸æˆ¿ä»· | `/api/beijing/analysis/layout` | å„æˆ·å‹å‡ä»·ã€æ•°é‡ç»Ÿè®¡ |
| æœå‘ä¸æˆ¿ä»· | `/api/beijing/analysis/orientation` | å„æœå‘å‡ä»·å¯¹æ¯” |
| ç”µæ¢¯ä¸æˆ¿ä»· | `/api/beijing/analysis/elevator` | æœ‰/æ— ç”µæ¢¯å‡ä»·å¯¹æ¯” |
| é¢ç§¯ä¸å•ä»· | `/api/beijing/analysis/area-price` | æ•£ç‚¹å›¾æ•°æ® |

##### ğŸ“Š C. äº¤äº’å¼æ•°æ®å¯è§†åŒ–

| å›¾è¡¨ç±»å‹ | ç”¨é€” | å…³è”æ¥å£ | ä¼˜å…ˆçº§ |
|---------|-----|---------|-------|
| æ•£ç‚¹å›¾ | é¢ç§¯-æ€»ä»·åˆ†å¸ƒ | `/api/beijing/chart/scatter` | P0 |
| ç®±çº¿å›¾ | å„åŒºæˆ¿ä»·åˆ†å¸ƒ | `/api/beijing/chart/boxplot` | P1 |
| æŸ±çŠ¶å›¾ | æˆ·å‹æ•°é‡å æ¯” | `/api/beijing/chart/bar` | P0 |
| é¥¼å›¾ | æœå‘åˆ†å¸ƒå æ¯” | `/api/beijing/chart/pie` | P2 |
| æŠ˜çº¿å›¾ | æ¥¼å±‚-å‡ä»·è¶‹åŠ¿ | `/api/beijing/chart/line` | P1 |

##### ğŸ§  D. AI æ™ºèƒ½æœåŠ¡æ¨¡å—

**D1. æ™ºèƒ½æˆ¿æºæ¨è**

| è¾“å…¥å‚æ•° | å­—æ®µå | ç±»å‹ |
|---------|-------|------|
| é¢„ç®—èŒƒå›´ | `budget_min`, `budget_max` | INT |
| ç›®æ ‡åŒºåŸŸ | `district` | STRING |
| æˆ·å‹åå¥½ | `layout` | STRING |
| é¢ç§¯éœ€æ±‚ | `area_min`, `area_max` | INT |
| æ¥¼å±‚åå¥½ | `floor_pref` | STRING |

å…³è”æ¥å£: `/api/beijing/ai/recommend`

**D2. AI å¯¹è¯åŠ©æ‰‹**

| åŠŸèƒ½ | å…³è”æ¥å£ |
|-----|---------|
| å‘é€æ¶ˆæ¯ | `POST /api/beijing/ai/chat` |
| è·å–å†å² | `GET /api/beijing/ai/chat/history` |

**D3. å¸‚åœºè¯„ä¼°æŠ¥å‘Š**

| åˆ†æç»´åº¦ | å…³è”æ¥å£ |
|---------|---------|
| ä»·å€¼æ”¯æ’‘åˆ†æ | `/api/beijing/ai/valuation` |
| å¸‚åœºæƒ…ç»ªåˆ¤æ–­ | `/api/beijing/ai/sentiment` |
| å†³ç­–å»ºè®® | `/api/beijing/ai/advice` |

---

## ğŸ”Œ API æ¥å£æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯

| é…ç½®é¡¹ | å€¼ |
|-------|---|
| Base URL | `http://localhost:5000/api` |
| Content-Type | `application/json` |
| è®¤è¯æ–¹å¼ | Bearer Token |

### æ¥å£æ¨¡å—æ¦‚è§ˆ

| æ¨¡å— | æ¥å£æ•°é‡ | è¯´æ˜ |
|-----|---------|------|
| ğŸ” è®¤è¯æ¨¡å— (Auth) | 8 | ç™»å½•ã€æ³¨å†Œã€éªŒè¯ç ã€å¯†ç é‡ç½® |
| ğŸŒ å…¨å›½æ•°æ® (National) | 6 | æ¦‚è§ˆã€åœ°å›¾ã€æ’è¡Œã€è¶‹åŠ¿ |
| ğŸ  åŒ—äº¬æ•°æ® (Beijing) | 10 | åŒºåŸŸåˆ†æã€ç‰¹å¾åˆ†æã€å›¾è¡¨ |
| ğŸ§  AI æœåŠ¡ (AI) | 4 | æ¨èã€å¯¹è¯ã€è¯„ä¼° |
| ğŸ‘¤ ç”¨æˆ·æ¨¡å— (User) | 7 | ä¸ªäººä¿¡æ¯ã€å¯†ç ã€é€šçŸ¥ |
| â­ æ”¶è—æ¨¡å— (Favorites) | 8 | æˆ¿æºã€åŸå¸‚ã€æŠ¥å‘Šæ”¶è— |
| ğŸ“Š æŠ¥å‘Šæ¨¡å— (Reports) | 5 | æŠ¥å‘Šåˆ—è¡¨ã€è¯¦æƒ…ã€ç”Ÿæˆ |
| âš™ï¸ ç³»ç»Ÿæ¨¡å— (System) | 4 | é…ç½®ã€åé¦ˆã€ç‰ˆæœ¬ |
| **æ€»è®¡** | **50** | - |

---

### ğŸ“‹ æ¥å£å¼€å‘è¿›åº¦è¡¨

> **æ›´æ–°æ—¥æœŸ**: 2024-12-10  
> **å‰ç«¯çŠ¶æ€**: âœ… å·²å®Œæˆ | **åç«¯çŠ¶æ€**: â³ å¼€å‘ä¸­  
> **è¿›åº¦**: 0/50 (0%)

#### ğŸ” è®¤è¯æ¨¡å— (Auth)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 1 | ç”¨æˆ·ç™»å½• | POST | `/auth/login` | âœ… | â¬œ | P0 æ ¸å¿ƒ |
| 2 | ç”¨æˆ·æ³¨å†Œ | POST | `/auth/register` | âœ… | â¬œ | P0 æ ¸å¿ƒ |
| 3 | å‘é€éªŒè¯ç  | POST | `/auth/send-captcha` | âœ… | â¬œ | P0 æ ¸å¿ƒ |
| 4 | æ£€æŸ¥ç”¨æˆ·å | GET | `/auth/check-username` | âœ… | â¬œ | P1 |
| 5 | æ£€æŸ¥æ‰‹æœºå· | GET | `/auth/check-phone` | âœ… | â¬œ | P1 |
| 6 | å¿˜è®°å¯†ç  | POST | `/auth/forgot-password` | âœ… | â¬œ | P1 |
| 7 | é‡ç½®å¯†ç  | POST | `/auth/reset-password` | âœ… | â¬œ | P1 |
| 8 | é€€å‡ºç™»å½• | POST | `/auth/logout` | âœ… | â¬œ | P1 |

#### ğŸŒ å…¨å›½æ•°æ®æ¨¡å— (National)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 9 | å…¨å›½æ¦‚è§ˆ | GET | `/national/overview` | âœ… | â¬œ | P0 é¦–é¡µ |
| 10 | åŸå¸‚æˆ¿ä»·(åœ°å›¾) | GET | `/national/city-prices` | âœ… | â¬œ | P0 é¦–é¡µ |
| 11 | çœä»½åˆ—è¡¨ | GET | `/national/provinces` | âœ… | â¬œ | P1 |
| 12 | åŸå¸‚æ’è¡Œæ¦œ | GET | `/national/ranking` | âœ… | â¬œ | P0 é¦–é¡µ |
| 13 | åŸå¸‚æœç´¢ | GET | `/national/search` | âœ… | â¬œ | P1 |
| 14 | ä»·æ ¼è¶‹åŠ¿ | GET | `/national/trend` | âœ… | â¬œ | P0 é¦–é¡µ |

#### ğŸ  åŒ—äº¬æ•°æ®æ¨¡å— (Beijing)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 15 | åŒ—äº¬æ¦‚è§ˆ | GET | `/beijing/overview` | âœ… | â¬œ | P0 åŒ—äº¬é¡µ |
| 16 | è¡Œæ”¿åŒºæ’å | GET | `/beijing/district-ranking` | âœ… | â¬œ | P0 åŒ—äº¬é¡µ |
| 17 | è¡Œæ”¿åŒºæˆ¿ä»·(åœ°å›¾) | GET | `/beijing/district-prices` | âœ… | â¬œ | P0 åŒ—äº¬é¡µ |
| 18 | æ¥¼å±‚åˆ†æ | GET | `/beijing/analysis/floor` | âœ… | â¬œ | P1 |
| 19 | æˆ·å‹åˆ†æ | GET | `/beijing/analysis/layout` | âœ… | â¬œ | P1 |
| 20 | æœå‘åˆ†æ | GET | `/beijing/analysis/orientation` | âœ… | â¬œ | P1 |
| 21 | ç”µæ¢¯åˆ†æ | GET | `/beijing/analysis/elevator` | âœ… | â¬œ | P1 |
| 22 | æ•£ç‚¹å›¾æ•°æ® | GET | `/beijing/chart/scatter` | âœ… | â¬œ | P1 |
| 23 | ç®±çº¿å›¾æ•°æ® | GET | `/beijing/chart/boxplot` | âœ… | â¬œ | P1 |
| 24 | æˆ¿æºåˆ—è¡¨ | GET | `/beijing/houses` | âœ… | â¬œ | P0 åŒ—äº¬é¡µ |

#### ğŸ§  AI æœåŠ¡æ¨¡å— (AI)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 25 | AI æ™ºèƒ½æ¨è | POST | `/beijing/ai/recommend` | âœ… | â¬œ | P1 |
| 26 | AI å¯¹è¯ | POST | `/beijing/ai/chat` | âœ… | â¬œ | P2 |
| 27 | èŠå¤©å†å² | GET | `/beijing/ai/chat/history` | âœ… | â¬œ | P2 |
| 28 | å¸‚åœºè¯„ä¼° | POST | `/beijing/ai/valuation` | âœ… | â¬œ | P2 |

#### ğŸ‘¤ ç”¨æˆ·æ¨¡å— (User)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 29 | è·å–ç”¨æˆ·ä¿¡æ¯ | GET | `/user/profile` | âœ… | â¬œ | P1 |
| 30 | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | PUT | `/user/profile` | âœ… | â¬œ | P1 |
| 31 | ä¿®æ”¹å¯†ç  | POST | `/user/change-password` | âœ… | â¬œ | P1 |
| 32 | ä¸Šä¼ å¤´åƒ | POST | `/user/avatar` | âŒ | âŒ | å·²ç§»é™¤ |
| 33 | è·å–é€šçŸ¥è®¾ç½® | GET | `/user/notifications/settings` | âœ… | â¬œ | P2 |
| 34 | æ›´æ–°é€šçŸ¥è®¾ç½® | PUT | `/user/notifications/settings` | âœ… | â¬œ | P2 |
| 35 | è·å–æ¶ˆæ¯åˆ—è¡¨ | GET | `/user/notifications` | âœ… | â¬œ | P2 |

#### â­ æ”¶è—æ¨¡å— (Favorites)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 36 | è·å–æ”¶è—æˆ¿æº | GET | `/favorites/houses` | âœ… | â¬œ | P1 |
| 37 | æ·»åŠ æˆ¿æºæ”¶è— | POST | `/favorites/houses` | âœ… | â¬œ | P1 |
| 38 | å–æ¶ˆæˆ¿æºæ”¶è— | DELETE | `/favorites/houses/:id` | âœ… | â¬œ | P1 |
| 39 | è·å–å…³æ³¨åŸå¸‚ | GET | `/favorites/cities` | âœ… | â¬œ | P2 |
| 40 | æ·»åŠ åŸå¸‚å…³æ³¨ | POST | `/favorites/cities` | âœ… | â¬œ | P2 |
| 41 | å–æ¶ˆåŸå¸‚å…³æ³¨ | DELETE | `/favorites/cities/:name` | âœ… | â¬œ | P2 |
| 42 | è·å–æ”¶è—æŠ¥å‘Š | GET | `/favorites/reports` | âœ… | â¬œ | P2 |
| 43 | æ·»åŠ /å–æ¶ˆæŠ¥å‘Šæ”¶è— | POST/DEL | `/favorites/reports` | âœ… | â¬œ | P2 |

#### ğŸ“Š æŠ¥å‘Šæ¨¡å— (Reports)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 44 | è·å–æŠ¥å‘Šç±»å‹ | GET | `/reports/types` | âœ… | â¬œ | P1 |
| 45 | è·å–æŠ¥å‘Šåˆ—è¡¨ | GET | `/reports` | âœ… | â¬œ | P1 |
| 46 | è·å–æŠ¥å‘Šè¯¦æƒ… | GET | `/reports/:id` | âœ… | â¬œ | P1 |
| 47 | ç”Ÿæˆè‡ªå®šä¹‰æŠ¥å‘Š | POST | `/reports/generate` | âœ… | â¬œ | P2 |
| 48 | è·å–æˆ‘çš„æŠ¥å‘Š | GET | `/reports/my` | âœ… | â¬œ | P2 |

#### âš™ï¸ ç³»ç»Ÿæ¨¡å— (System)

| # | æ¥å£ | æ–¹æ³• | è·¯å¾„ | å‰ç«¯ | åç«¯ | å¤‡æ³¨ |
|---|-----|------|------|:----:|:----:|------|
| 49 | è·å–ç³»ç»Ÿé…ç½® | GET | `/system/config` | âœ… | â¬œ | P2 |
| 50 | æ•°æ®æ›´æ–°æ—¶é—´ | GET | `/system/data-update-time` | âœ… | â¬œ | P2 |
| 51 | æäº¤åé¦ˆ | POST | `/system/feedback` | âœ… | â¬œ | P2 |
| 52 | è·å–ç‰ˆæœ¬ä¿¡æ¯ | GET | `/system/version` | âœ… | â¬œ | P2 |

---

### ğŸ“Š è¿›åº¦ç»Ÿè®¡

| ä¼˜å…ˆçº§ | æ€»æ•° | å‰ç«¯å®Œæˆ | åç«¯å®Œæˆ | å®Œæˆç‡ |
|-------|------|---------|---------|-------|
| P0 (æ ¸å¿ƒ) | 12 | 12 | 0 | 0% |
| P1 (é‡è¦) | 22 | 22 | 0 | 0% |
| P2 (æ¬¡è¦) | 17 | 17 | 0 | 0% |
| **æ€»è®¡** | **51** | **51** | **0** | **0%** |

> **æ³¨**: å·²ç§»é™¤ä¸Šä¼ å¤´åƒæ¥å£(#32)ï¼Œå½“å‰å…±51ä¸ªæ¥å£

### å›¾ä¾‹è¯´æ˜

| ç¬¦å· | å«ä¹‰ |
|-----|------|
| âœ… | å·²å®Œæˆ |
| ğŸ”„ | å¼€å‘ä¸­ |
| â¬œ | æœªå¼€å§‹ |
| âŒ | å·²åºŸå¼ƒ |
| ğŸ› | æœ‰Bug |

### ä¼˜å…ˆçº§è¯´æ˜

| ä¼˜å…ˆçº§ | è¯´æ˜ | å»ºè®®å®Œæˆæ—¶é—´ |
|-------|------|-------------|
| P0 | æ ¸å¿ƒåŠŸèƒ½ï¼Œå½±å“ä¸»æµç¨‹ | ç¬¬1å‘¨ |
| P1 | é‡è¦åŠŸèƒ½ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ | ç¬¬2å‘¨ |
| P2 | æ¬¡è¦åŠŸèƒ½ï¼Œå¯å»¶åå®ç° | ç¬¬3å‘¨ |

---

### é€šç”¨å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": { ... }
}
```

### é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | æè¿° |
|-------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ/Tokenå¤±æ•ˆ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

### ğŸ” è®¤è¯æ¨¡å— (Auth)

#### 1. ç”¨æˆ·ç™»å½•

```
POST /api/auth/login
```

**è¯·æ±‚ä½“:**
```json
{
  "username": "string",
  "password": "string"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": 1,
      "username": "admin",
      "nickname": "ç®¡ç†å‘˜"
    }
  }
}
```

---

### ğŸ—ºï¸ å…¨å›½æ•°æ®æ¨¡å— (National)

#### 2. è·å–å…¨å›½æ¦‚è§ˆæ•°æ®

```
GET /api/national/overview
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "national_avg_price": 12580,
    "highest_city": {
      "name": "åŒ—äº¬",
      "price": 65000
    },
    "lowest_city": {
      "name": "é¹¤å²—",
      "price": 2100
    },
    "total_listings": 1250000,
    "total_cities": 320
  }
}
```

#### 3. è·å–æ‰€æœ‰åŸå¸‚æˆ¿ä»· (åœ°å›¾ç”¨)

```
GET /api/national/city-prices
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| province | string | å¦ | ç­›é€‰çœä»½ |
| min_price | int | å¦ | æœ€ä½ä»·æ ¼ |
| max_price | int | å¦ | æœ€é«˜ä»·æ ¼ |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "cities": [
      {
        "province_name": "åŒ—äº¬",
        "city_name": "åŒ—äº¬",
        "city_avg_price": 65000,
        "city_avg_total_price": 450,
        "price_rent_ratio": 55,
        "listing_count": 5000,
        "districts": [
          {
            "district_name": "æµ·æ·€åŒº",
            "district_avg_price": 78000,
            "district_ratio": 2.5
          }
        ]
      }
    ]
  }
}
```

#### 4. è·å–çœä»½åˆ—è¡¨

```
GET /api/national/provinces
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "provinces": ["åŒ—äº¬", "ä¸Šæµ·", "å¹¿ä¸œ", "æµ™æ±Ÿ", "æ±Ÿè‹", ...]
  }
}
```

#### 5. è·å–åŸå¸‚æ’è¡Œæ¦œ

```
GET /api/national/ranking
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| type | string | æ˜¯ | æ’è¡Œç±»å‹: `price` / `change` / `rent_ratio` |
| limit | int | å¦ | è¿”å›æ•°é‡ï¼Œé»˜è®¤10 |
| order | string | å¦ | æ’åº: `desc`(é»˜è®¤) / `asc` |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "type": "price",
    "ranking": [
      {"rank": 1, "city_name": "åŒ—äº¬", "value": 65000},
      {"rank": 2, "city_name": "ä¸Šæµ·", "value": 62000},
      {"rank": 3, "city_name": "æ·±åœ³", "value": 58000}
    ]
  }
}
```

#### 6. åŸå¸‚æœç´¢

```
GET /api/national/search
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| keyword | string | æ˜¯ | æœç´¢å…³é”®è¯ |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "results": [
      {
        "city_name": "åŒ—äº¬",
        "province_name": "åŒ—äº¬",
        "city_avg_price": 65000
      }
    ]
  }
}
```

#### 7. è·å–ä»·æ ¼è¶‹åŠ¿

```
GET /api/national/trend
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| city | string | å¦ | åŸå¸‚åï¼Œä¸ä¼ åˆ™è¿”å›å…¨å›½ |
| year | int | å¦ | å¹´ä»½ |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "city_name": "åŒ—äº¬",
    "trends": [
      {"year": 2024, "month": 1, "avg_price": 64500},
      {"year": 2024, "month": 2, "avg_price": 64800}
    ]
  }
}
```

---

### ğŸ  åŒ—äº¬æ•°æ®æ¨¡å— (Beijing)

#### 8. è·å–åŒ—äº¬æ¦‚è§ˆ

```
GET /api/beijing/overview
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "avg_price": 65000,
    "avg_total_price": 450,
    "total_listings": 32000,
    "hot_districts": ["æœé˜³", "æµ·æ·€", "è¥¿åŸ"]
  }
}
```

#### 9. è·å–è¡Œæ”¿åŒºæ’å

```
GET /api/beijing/district-ranking
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "ranking": [
      {"rank": 1, "district": "è¥¿åŸ", "avg_price": 95000, "change": 1.2},
      {"rank": 2, "district": "ä¸œåŸ", "avg_price": 92000, "change": -0.5},
      {"rank": 3, "district": "æµ·æ·€", "avg_price": 78000, "change": 2.1}
    ]
  }
}
```

#### 10. è·å–è¡Œæ”¿åŒºæˆ¿ä»· (åœ°å›¾ç”¨)

```
GET /api/beijing/district-prices
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "districts": [
      {"name": "æœé˜³", "avg_price": 65000, "count": 8500},
      {"name": "æµ·æ·€", "avg_price": 78000, "count": 6200}
    ]
  }
}
```

#### 11. ç‰¹å¾åˆ†æ - æ¥¼å±‚

```
GET /api/beijing/analysis/floor
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "floor_analysis": [
      {"category": "ä½æ¥¼å±‚(1-6)", "avg_price": 62000, "count": 8500, "percentage": 26.5},
      {"category": "ä¸­æ¥¼å±‚(7-15)", "avg_price": 65000, "count": 15000, "percentage": 46.9},
      {"category": "é«˜æ¥¼å±‚(16+)", "avg_price": 68000, "count": 8500, "percentage": 26.6}
    ]
  }
}
```

#### 12. ç‰¹å¾åˆ†æ - æˆ·å‹

```
GET /api/beijing/analysis/layout
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "layout_analysis": [
      {"layout": "1å®¤", "avg_price": 55000, "avg_total": 280, "count": 3200},
      {"layout": "2å®¤", "avg_price": 62000, "avg_total": 420, "count": 15000},
      {"layout": "3å®¤", "avg_price": 68000, "avg_total": 580, "count": 10000},
      {"layout": "4å®¤+", "avg_price": 75000, "avg_total": 850, "count": 3800}
    ]
  }
}
```

#### 13. ç‰¹å¾åˆ†æ - æœå‘

```
GET /api/beijing/analysis/orientation
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "orientation_analysis": [
      {"orientation": "å—", "avg_price": 66000, "count": 18000},
      {"orientation": "å—åŒ—", "avg_price": 68000, "count": 8000},
      {"orientation": "ä¸œ", "avg_price": 62000, "count": 3000},
      {"orientation": "è¥¿", "avg_price": 61000, "count": 2000},
      {"orientation": "åŒ—", "avg_price": 58000, "count": 1000}
    ]
  }
}
```

#### 14. ç‰¹å¾åˆ†æ - ç”µæ¢¯

```
GET /api/beijing/analysis/elevator
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "elevator_analysis": [
      {"has_elevator": true, "avg_price": 67000, "count": 28000},
      {"has_elevator": false, "avg_price": 55000, "count": 4000}
    ]
  }
}
```

#### 15. æ•£ç‚¹å›¾æ•°æ® (é¢ç§¯-ä»·æ ¼)

```
GET /api/beijing/chart/scatter
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| district | string | å¦ | ç­›é€‰åŒºåŸŸ |
| limit | int | å¦ | æ•°æ®ç‚¹æ•°é‡ï¼Œé»˜è®¤1000 |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "points": [
      {"area": 88.5, "total_price": 310, "price_per_sqm": 35001, "district": "æœé˜³"},
      {"area": 94.2, "total_price": 620, "price_per_sqm": 65853, "district": "æµ·æ·€"}
    ]
  }
}
```

#### 16. ç®±çº¿å›¾æ•°æ®

```
GET /api/beijing/chart/boxplot
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "boxplot": [
      {
        "district": "æœé˜³",
        "min": 25000,
        "q1": 45000,
        "median": 55000,
        "q3": 70000,
        "max": 150000
      }
    ]
  }
}
```

#### 17. æˆ¿æºåˆ—è¡¨æŸ¥è¯¢

```
GET /api/beijing/houses
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| district | string | å¦ | è¡Œæ”¿åŒº |
| layout | string | å¦ | æˆ·å‹ |
| min_price | int | å¦ | æœ€ä½æ€»ä»·(ä¸‡) |
| max_price | int | å¦ | æœ€é«˜æ€»ä»·(ä¸‡) |
| min_area | int | å¦ | æœ€å°é¢ç§¯(ã¡) |
| max_area | int | å¦ | æœ€å¤§é¢ç§¯(ã¡) |
| page | int | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| page_size | int | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "total": 32000,
    "page": 1,
    "page_size": 20,
    "houses": [
      {
        "house_id": 1,
        "total_price": 310,
        "price_per_sqm": 35001,
        "area": 88.57,
        "layout": "2å®¤1å…",
        "orientation": "å—",
        "floor": 2,
        "has_elevator": "æœ‰ç”µæ¢¯",
        "region": "æœé˜³",
        "tags": "ç²¾è£… å—"
      }
    ]
  }
}
```

---

### ğŸ§  AI æœåŠ¡æ¨¡å— (AI)

#### 18. AI æ™ºèƒ½æ¨è

```
POST /api/beijing/ai/recommend
```

**è¯·æ±‚ä½“:**
```json
{
  "budget_min": 300,
  "budget_max": 500,
  "district": "æœé˜³",
  "layout": "2å®¤",
  "area_min": 60,
  "area_max": 100,
  "floor_pref": "ä¸­å±‚"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "recommendations": [
      {
        "house_id": 123,
        "total_price": 420,
        "price_per_sqm": 52500,
        "area": 80,
        "layout": "2å®¤1å…",
        "district": "æœé˜³",
        "match_score": 95.5,
        "reason": "è¯¥æˆ¿æºä½äºæœé˜³åŒºï¼Œæˆ·å‹ä¸º2å®¤1å…ï¼Œé¢ç§¯80ã¡ï¼Œæ€»ä»·420ä¸‡ï¼Œå®Œå…¨ç¬¦åˆæ‚¨çš„é¢„ç®—å’Œé¢ç§¯éœ€æ±‚ï¼Œä¸”ä½äºä¸­å±‚ï¼Œé‡‡å…‰è‰¯å¥½ã€‚"
      }
    ],
    "total_matched": 156
  }
}
```

#### 19. AI å¯¹è¯

```
POST /api/beijing/ai/chat
```

**è¯·æ±‚ä½“:**
```json
{
  "message": "æœé˜³åŒºç°åœ¨å‡ä»·å¤šå°‘ï¼Ÿ",
  "session_id": "uuid-xxx"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "reply": "æ ¹æ®æœ€æ–°æ•°æ®ï¼Œæœé˜³åŒºå½“å‰äºŒæ‰‹æˆ¿å‡ä»·çº¦ä¸º65,000å…ƒ/ã¡ï¼Œåœ¨åŒ—äº¬å„åŒºä¸­å¤„äºä¸­ä¸Šæ°´å¹³ã€‚æœé˜³åŒºå†…éƒ¨ä»·æ ¼å·®å¼‚è¾ƒå¤§ï¼Œæœ›äº¬ã€CBDç­‰çƒ­é—¨æ¿å—å‡ä»·å¯è¾¾8-10ä¸‡/ã¡ï¼Œè€Œå¸¸è¥ã€ç®¡åº„ç­‰åŒºåŸŸå‡ä»·çº¦4-5ä¸‡/ã¡ã€‚",
    "session_id": "uuid-xxx",
    "related_data": {
      "district": "æœé˜³",
      "avg_price": 65000
    }
  }
}
```

#### 20. è·å–èŠå¤©å†å²

```
GET /api/beijing/ai/chat/history
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| session_id | string | æ˜¯ | ä¼šè¯ID |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "history": [
      {"role": "user", "content": "æœé˜³åŒºç°åœ¨å‡ä»·å¤šå°‘ï¼Ÿ", "timestamp": "2024-12-10T10:00:00Z"},
      {"role": "assistant", "content": "æ ¹æ®æœ€æ–°æ•°æ®...", "timestamp": "2024-12-10T10:00:02Z"}
    ]
  }
}
```

#### 21. å¸‚åœºè¯„ä¼°

```
POST /api/beijing/ai/valuation
```

**è¯·æ±‚ä½“:**
```json
{
  "house_id": 123
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "valuation": {
      "estimated_price": 425,
      "price_range": {"min": 400, "max": 450},
      "factors": [
        {"name": "åœ°ç†ä½ç½®", "score": 85, "weight": 30},
        {"name": "äº¤é€šä¾¿åˆ©", "score": 90, "weight": 25},
        {"name": "å­¦åŒºèµ„æº", "score": 70, "weight": 20},
        {"name": "æˆ¿å±‹å“è´¨", "score": 80, "weight": 15},
        {"name": "ç¤¾åŒºç¯å¢ƒ", "score": 75, "weight": 10}
      ],
      "market_sentiment": "ä¹°æ–¹å¸‚åœº",
      "advice": "è®®ä»·ç©ºé—´",
      "advice_detail": "å½“å‰è¯¥åŒºåŸŸæˆäº¤å‘¨æœŸè¾ƒé•¿ï¼Œå»ºè®®å¯ä¸å–å®¶åå•†5-8%çš„è®®ä»·ç©ºé—´ã€‚"
    }
  }
}
```

---

### ğŸ‘¤ ç”¨æˆ·æ¨¡å— (User)

#### 22. ç”¨æˆ·æ³¨å†Œ

```
POST /api/auth/register
```

**è¯·æ±‚ä½“:**
```json
{
  "username": "user123",
  "phone": "13800138000",
  "email": "user@example.com",
  "password": "Password123",
  "captcha": "123456"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "user_id": 1,
    "username": "user123",
    "message": "æ³¨å†ŒæˆåŠŸ"
  }
}
```

#### 23. å‘é€éªŒè¯ç 

```
POST /api/auth/send-captcha
```

**è¯·æ±‚ä½“:**
```json
{
  "phone": "13800138000",
  "type": "register"  // register | reset_password | login
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "éªŒè¯ç å·²å‘é€",
    "expires_in": 300
  }
}
```

#### 24. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨

```
GET /api/auth/check-username
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| username | string | æ˜¯ | ç”¨æˆ·å |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "available": true,
    "message": "ç”¨æˆ·åå¯ç”¨"
  }
}
```

#### 25. æ£€æŸ¥æ‰‹æœºå·æ˜¯å¦å·²æ³¨å†Œ

```
GET /api/auth/check-phone
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| phone | string | æ˜¯ | æ‰‹æœºå· |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "registered": false,
    "message": "æ‰‹æœºå·æœªæ³¨å†Œ"
  }
}
```

#### 26. å¿˜è®°å¯†ç 

```
POST /api/auth/forgot-password
```

**è¯·æ±‚ä½“:**
```json
{
  "phone": "13800138000"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "éªŒè¯ç å·²å‘é€",
    "expires_in": 300
  }
}
```

#### 27. é‡ç½®å¯†ç 

```
POST /api/auth/reset-password
```

**è¯·æ±‚ä½“:**
```json
{
  "phone": "13800138000",
  "captcha": "123456",
  "new_password": "NewPassword123"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "å¯†ç é‡ç½®æˆåŠŸ"
  }
}
```

#### 28. é€€å‡ºç™»å½•

```
POST /api/auth/logout
```

**è¯·æ±‚å¤´:**
```
Authorization: Bearer <token>
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "å·²é€€å‡ºç™»å½•"
  }
}
```

#### 29. è·å–ç”¨æˆ·ä¿¡æ¯

```
GET /api/user/profile
```

**è¯·æ±‚å¤´:**
```
Authorization: Bearer <token>
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "user_id": 1,
    "username": "user123",
    "phone": "138****8000",
    "email": "user@example.com",
    "avatar": "https://xxx/avatar.jpg",
    "nickname": "æˆ¿äº§è¾¾äºº",
    "vip_level": 1,
    "vip_expire": "2025-01-01",
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

#### 30. æ›´æ–°ç”¨æˆ·ä¿¡æ¯

```
PUT /api/user/profile
```

**è¯·æ±‚ä½“:**
```json
{
  "nickname": "æ–°æ˜µç§°",
  "email": "new@example.com"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "æ›´æ–°æˆåŠŸ"
  }
}
```

#### 31. ä¿®æ”¹å¯†ç 

```
POST /api/user/change-password
```

**è¯·æ±‚ä½“:**
```json
{
  "old_password": "OldPassword123",
  "new_password": "NewPassword123"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "å¯†ç ä¿®æ”¹æˆåŠŸ"
  }
}
```

#### 32. ä¸Šä¼ å¤´åƒ

```
POST /api/user/avatar
```

**è¯·æ±‚å¤´:**
```
Content-Type: multipart/form-data
```

**è¯·æ±‚ä½“:**
```
avatar: <file>
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "avatar_url": "https://xxx/new-avatar.jpg"
  }
}
```

#### 33. è·å–é€šçŸ¥è®¾ç½®

```
GET /api/user/notifications/settings
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "price_alert": true,
    "new_listing": true,
    "market_report": false,
    "system_notice": true,
    "email_notify": false,
    "sms_notify": true
  }
}
```

#### 34. æ›´æ–°é€šçŸ¥è®¾ç½®

```
PUT /api/user/notifications/settings
```

**è¯·æ±‚ä½“:**
```json
{
  "price_alert": true,
  "new_listing": false,
  "market_report": true
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "è®¾ç½®å·²ä¿å­˜"
  }
}
```

---

### â­ æ”¶è—æ¨¡å— (Favorites)

#### 35. è·å–æ”¶è—çš„æˆ¿æºåˆ—è¡¨

```
GET /api/favorites/houses
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| page | int | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| page_size | int | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "total": 15,
    "page": 1,
    "houses": [
      {
        "favorite_id": 1,
        "house_id": 123,
        "total_price": 420,
        "price_per_sqm": 52500,
        "area": 80,
        "layout": "2å®¤1å…",
        "district": "æœé˜³",
        "note": "çœ‹å¥½è¿™å¥—",
        "favorited_at": "2024-12-01T10:00:00Z",
        "price_change": -5
      }
    ]
  }
}
```

#### 36. æ·»åŠ æˆ¿æºæ”¶è—

```
POST /api/favorites/houses
```

**è¯·æ±‚ä½“:**
```json
{
  "house_id": 123,
  "note": "çœ‹å¥½è¿™å¥—"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "favorite_id": 1,
    "message": "æ”¶è—æˆåŠŸ"
  }
}
```

#### 37. å–æ¶ˆæˆ¿æºæ”¶è—

```
DELETE /api/favorites/houses/:id
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "å–æ¶ˆæ”¶è—æˆåŠŸ"
  }
}
```

#### 38. è·å–å…³æ³¨çš„åŸå¸‚åˆ—è¡¨

```
GET /api/favorites/cities
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "cities": [
      {
        "city_name": "åŒ—äº¬",
        "avg_price": 65000,
        "price_change": 1.2,
        "followed_at": "2024-11-01T10:00:00Z"
      },
      {
        "city_name": "ä¸Šæµ·",
        "avg_price": 62000,
        "price_change": -0.5,
        "followed_at": "2024-11-15T10:00:00Z"
      }
    ]
  }
}
```

#### 39. æ·»åŠ åŸå¸‚å…³æ³¨

```
POST /api/favorites/cities
```

**è¯·æ±‚ä½“:**
```json
{
  "city_name": "æ·±åœ³"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "å…³æ³¨æˆåŠŸ"
  }
}
```

#### 40. å–æ¶ˆåŸå¸‚å…³æ³¨

```
DELETE /api/favorites/cities/:name
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "message": "å–æ¶ˆå…³æ³¨æˆåŠŸ"
  }
}
```

#### 41. è·å–æ”¶è—çš„æŠ¥å‘Šåˆ—è¡¨

```
GET /api/favorites/reports
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "reports": [
      {
        "favorite_id": 1,
        "report_id": 10,
        "title": "2024å¹´12æœˆåŒ—äº¬æˆ¿äº§å¸‚åœºåˆ†æ",
        "type": "monthly",
        "favorited_at": "2024-12-05T10:00:00Z"
      }
    ]
  }
}
```

#### 42. æ·»åŠ /å–æ¶ˆæŠ¥å‘Šæ”¶è—

```
POST /api/favorites/reports
DELETE /api/favorites/reports/:id
```

---

### ğŸ“Š æŠ¥å‘Šæ¨¡å— (Reports)

#### 43. è·å–æŠ¥å‘Šç±»å‹åˆ—è¡¨

```
GET /api/reports/types
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "types": [
      {"id": "monthly", "name": "æœˆåº¦æŠ¥å‘Š", "description": "æ¯æœˆå¸‚åœºåˆ†æ"},
      {"id": "quarterly", "name": "å­£åº¦æŠ¥å‘Š", "description": "å­£åº¦æ·±åº¦åˆ†æ"},
      {"id": "annual", "name": "å¹´åº¦æŠ¥å‘Š", "description": "å¹´åº¦å…¨é¢æ€»ç»“"},
      {"id": "district", "name": "åŒºåŸŸæŠ¥å‘Š", "description": "ç‰¹å®šåŒºåŸŸåˆ†æ"},
      {"id": "custom", "name": "è‡ªå®šä¹‰æŠ¥å‘Š", "description": "æ ¹æ®éœ€æ±‚å®šåˆ¶"}
    ]
  }
}
```

#### 44. è·å–æŠ¥å‘Šåˆ—è¡¨

```
GET /api/reports
```

**æŸ¥è¯¢å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | æè¿° |
|-----|------|-----|------|
| type | string | å¦ | æŠ¥å‘Šç±»å‹ |
| city | string | å¦ | åŸå¸‚ |
| page | int | å¦ | é¡µç  |
| page_size | int | å¦ | æ¯é¡µæ•°é‡ |

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "total": 50,
    "page": 1,
    "reports": [
      {
        "report_id": 10,
        "title": "2024å¹´12æœˆåŒ—äº¬æˆ¿äº§å¸‚åœºåˆ†æ",
        "type": "monthly",
        "city": "åŒ—äº¬",
        "cover_image": "https://xxx/cover.jpg",
        "summary": "æœ¬æœˆåŒ—äº¬äºŒæ‰‹æˆ¿æˆäº¤é‡ç¯æ¯”ä¸Šæ¶¨15%...",
        "published_at": "2024-12-10T00:00:00Z",
        "views": 1250,
        "is_favorited": true
      }
    ]
  }
}
```

#### 45. è·å–æŠ¥å‘Šè¯¦æƒ…

```
GET /api/reports/:id
```

**å“åº”:**

```json
{
  "code": 200,
  "data": {
    "report_id": 10,
    "title": "2024å¹´12æœˆåŒ—äº¬æˆ¿äº§å¸‚åœºåˆ†æ",
    "type": "monthly",
    "city": "åŒ—äº¬",
    "content": "ä¸€ã€å¸‚åœºæ¦‚è¿°\næœ¬æœˆåŒ—äº¬äºŒæ‰‹æˆ¿å¸‚åœºæ•´ä½“å‘ˆç°å›æš–æ€åŠ¿...\n\näºŒã€ä»·æ ¼åˆ†æ\nå…¨å¸‚å‡ä»·65000å…ƒ/ã¡ï¼Œç¯æ¯”ä¸Šæ¶¨0.5%...",
    "summary": "æœ¬æœˆåŒ—äº¬äºŒæ‰‹æˆ¿æˆäº¤é‡ç¯æ¯”ä¸Šæ¶¨15%...",
    "highlights": [
      "æˆäº¤é‡ç¯æ¯”ä¸Šæ¶¨15%",
      "å‡ä»·åŒæ¯”ä¸‹é™2.3%",
      "æµ·æ·€åŒºæœ€å—å…³æ³¨"
    ],
    "charts_data": {...},
    "published_at": "2024-12-10T00:00:00Z",
    "author": "å¸‚åœºç ”ç©¶éƒ¨"
  }
}
```

#### 46. ç”Ÿæˆè‡ªå®šä¹‰æŠ¥å‘Š

```
POST /api/reports/generate
```

**è¯·æ±‚ä½“:**

```json
{
  "type": "custom",
  "city": "åŒ—äº¬",
  "districts": ["æœé˜³", "æµ·æ·€"],
  "date_range": {
    "start": "2024-01-01",
    "end": "2024-12-31"
  },
  "metrics": ["price_trend", "volume", "district_comparison"],
  "format": "pdf"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "report_id": 100,
    "status": "generating",
    "estimated_time": 30,
    "message": "æŠ¥å‘Šç”Ÿæˆä¸­ï¼Œé¢„è®¡30ç§’å®Œæˆ"
  }
}
```

#### 47. è·å–æˆ‘çš„æŠ¥å‘Š

```
GET /api/reports/my
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "reports": [
      {
        "report_id": 100,
        "title": "è‡ªå®šä¹‰æŠ¥å‘Š - åŒ—äº¬æœé˜³æµ·æ·€",
        "type": "custom",
        "status": "completed",
        "created_at": "2024-12-10T10:00:00Z",
        "summary": "æœé˜³åŒºå’Œæµ·æ·€åŒº2024å¹´æˆ¿äº§å¸‚åœºç»¼åˆåˆ†ææŠ¥å‘Š",
        "content": "ä¸€ã€åŒºåŸŸæ¦‚å†µ\næœé˜³åŒºå’Œæµ·æ·€åŒºæ˜¯åŒ—äº¬æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªåŒºåŸŸ...\n\näºŒã€ä»·æ ¼å¯¹æ¯”\n- æµ·æ·€åŒºå‡ä»·ï¼š78,000å…ƒ/ã¡\n- æœé˜³åŒºå‡ä»·ï¼š65,000å…ƒ/ã¡",
        "highlights": ["æµ·æ·€å‡ä»·78000å…ƒ/ã¡", "æœé˜³æˆäº¤é‡é¢†å…ˆ"],
        "author": "ç³»ç»Ÿç”Ÿæˆ"
      }
    ]
  }
}
```

> **æ³¨**: `content` å­—æ®µä¸ºçº¯æ–‡æœ¬æ ¼å¼ï¼Œä½¿ç”¨ `\n` æ¢è¡Œ

---

### âš™ï¸ ç³»ç»Ÿæ¨¡å— (System)

#### 48. è·å–ç³»ç»Ÿé…ç½®

```
GET /api/system/config
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "app_name": "æˆ¿æ",
    "version": "1.0.0",
    "features": {
      "ai_chat": true,
      "vip_required_features": ["custom_report", "data_export"]
    },
    "contact": {
      "email": "support@fangxi.com",
      "phone": "400-xxx-xxxx"
    }
  }
}
```

#### 49. è·å–æ•°æ®æ›´æ–°æ—¶é—´

```
GET /api/system/data-update-time
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "last_update": "2024-12-10T08:00:00Z",
    "next_update": "2024-12-11T08:00:00Z",
    "data_sources": [
      {"name": "å…¨å›½æˆ¿ä»·", "updated_at": "2024-12-10T08:00:00Z"},
      {"name": "åŒ—äº¬æˆ¿æº", "updated_at": "2024-12-10T06:00:00Z"}
    ]
  }
}
```

#### 50. æäº¤åé¦ˆ

```
POST /api/system/feedback
```

**è¯·æ±‚ä½“:**
```json
{
  "type": "bug",
  "title": "é¡µé¢åŠ è½½ç¼“æ…¢",
  "content": "é¦–é¡µåœ°å›¾åŠ è½½éœ€è¦10ç§’ä»¥ä¸Š",
  "contact": "user@example.com"
}
```

**å“åº”:**
```json
{
  "code": 200,
  "data": {
    "ticket_id": "FB202412100001",
    "message": "æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†"
  }
}
```

---

## ğŸ› ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|-----|---------|------|
| åŸºç¡€ | HTML5 + CSS3 + ES6+ | åŸç”Ÿå®ç° |
| å›¾è¡¨åº“ | ECharts 5.x | åœ°å›¾ã€æŸ±çŠ¶å›¾ã€æ•£ç‚¹å›¾ç­‰ |
| HTTP è¯·æ±‚ | Fetch API / Axios | ä¸åç«¯é€šä¿¡ |
| å›¾æ ‡ | Font Awesome / Lucide | UI å›¾æ ‡ |
| å­˜å‚¨ | LocalStorage | Token å­˜å‚¨ |

### æ•°æ®æµç¨‹

```
ç”¨æˆ·æ“ä½œ â†’ å‰ç«¯å‘èµ· API è¯·æ±‚ â†’ Flask åç«¯å¤„ç† â†’ æ•°æ®åº“æŸ¥è¯¢ â†’ è¿”å› JSON â†’ å‰ç«¯æ¸²æŸ“
```

### ğŸ§ª æ¨¡æ‹Ÿæ•°æ®æ¨¡å¼ (Mock Mode)

åœ¨åç«¯å¼€å‘å®Œæˆå‰ï¼Œå‰ç«¯å¯ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®è¿›è¡Œç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•ã€‚

**å¼€å…³æ§åˆ¶** (`js/api.js`):
```javascript
const API = {
  MOCK_MODE: true,   // true: ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®, false: è¯·æ±‚çœŸå®åç«¯
  MOCK_DELAY: 300,   // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ(æ¯«ç§’)
  // ...
};
```

**æ¨¡æ‹Ÿæ•°æ®æ–‡ä»¶**: `js/mock-data.js`

| æ¨¡å— | è¦†ç›–æ¥å£ | æ•°æ®é‡ |
|-----|---------|-------|
| è®¤è¯ | ç™»å½•ã€æ³¨å†Œã€éªŒè¯ç ç­‰ | 8ä¸ª |
| å…¨å›½æ•°æ® | æ¦‚è§ˆã€åŸå¸‚æˆ¿ä»·ã€æ’è¡Œæ¦œã€è¶‹åŠ¿ | 17ä¸ªåŸå¸‚ |
| åŒ—äº¬æ•°æ® | æ¦‚è§ˆã€åŒºåŸŸã€ç‰¹å¾åˆ†æã€æˆ¿æºåˆ—è¡¨ | 12ä¸ªåŒºã€10å¥—æˆ¿æº |
| AIæœåŠ¡ | æ¨èã€å¯¹è¯ã€è¯„ä¼° | å®Œæ•´å“åº”ç¤ºä¾‹ |
| ç”¨æˆ· | ä¸ªäººä¿¡æ¯ã€é€šçŸ¥è®¾ç½® | å®Œæ•´æ•°æ® |
| æ”¶è— | æˆ¿æºã€åŸå¸‚ã€æŠ¥å‘Š | ç¤ºä¾‹æ•°æ® |
| æŠ¥å‘Š | ç±»å‹ã€åˆ—è¡¨ã€è¯¦æƒ… | 4ä¸ªæŠ¥å‘Š |
| ç³»ç»Ÿ | é…ç½®ã€ç‰ˆæœ¬ä¿¡æ¯ | å®Œæ•´é…ç½® |

**ä½¿ç”¨æ–¹å¼**:
1. ç¡®ä¿ `mock-data.js` åœ¨ `api.js` ä¹‹å‰åŠ è½½
2. è®¾ç½® `API.MOCK_MODE = true` å¼€å¯æ¨¡æ‹Ÿæ¨¡å¼
3. åç«¯å®Œæˆåï¼Œè®¾ç½® `API.MOCK_MODE = false` åˆ‡æ¢åˆ°çœŸå®æ¥å£

**è‡ªåŠ¨é™çº§**: å³ä½¿ `MOCK_MODE = false`ï¼Œå½“åç«¯ä¸å¯ç”¨æ—¶ä¹Ÿä¼šè‡ªåŠ¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ã€‚

---

### è¯·æ±‚å°è£…ç¤ºä¾‹

```javascript
// api.js
const BASE_URL = 'http://localhost:5000/api';

async function request(endpoint, options = {}) {
  const token = localStorage.getItem('token');
  
  const config = {
    headers: {
      'Content-Type': 'application/json',
      ...(token && { 'Authorization': `Bearer ${token}` })
    },
    ...options
  };
  
  const response = await fetch(`${BASE_URL}${endpoint}`, config);
  const data = await response.json();
  
  if (data.code !== 200) {
    throw new Error(data.message);
  }
  
  return data.data;
}

// ä½¿ç”¨ç¤ºä¾‹
const overview = await request('/national/overview');
```

---

## ğŸ“… å¼€å‘è®¡åˆ’ (PLAN)

### Phase 1: åŸºç¡€æ¡†æ¶ âœ… å·²å®Œæˆ

| ä»»åŠ¡ | äº§å‡º | çŠ¶æ€ |
|-----|------|------|
| é¡¹ç›®ç»“æ„æ­å»º | æ–‡ä»¶å¤¹ã€å…¥å£æ–‡ä»¶ | âœ… å·²å®Œæˆ |
| å…¨å±€æ ·å¼è®¾è®¡ | CSS å˜é‡ã€ä¸»é¢˜è‰² | âœ… å·²å®Œæˆ |
| API è¯·æ±‚å°è£… | api.js å·¥å…·æ¨¡å— (21ä¸ªæ¥å£) | âœ… å·²å®Œæˆ |
| Token ç®¡ç† | auth.js ç™»å½•çŠ¶æ€ç®¡ç† | âœ… å·²å®Œæˆ |

### Phase 2: ç™»å½•é¡µé¢ âœ… å·²å®Œæˆ

| ä»»åŠ¡ | äº§å‡º | çŠ¶æ€ |
|-----|------|------|
| é¡µé¢å¸ƒå±€ | login.html (å·¦å³åˆ†æ å¸ƒå±€) | âœ… å·²å®Œæˆ |
| è¡¨å•ç»„ä»¶ | è¾“å…¥æ¡†ã€æŒ‰é’®ã€å¯†ç æ˜¾éšåˆ‡æ¢ | âœ… å·²å®Œæˆ |
| ç™»å½•æ¥å£å¯¹æ¥ | è°ƒç”¨ `/api/auth/login` | âœ… å·²å®Œæˆ |
| è®°ä½æˆ‘åŠŸèƒ½ | LocalStorage å­˜å‚¨ç”¨æˆ·å | âœ… å·²å®Œæˆ |

### Phase 3: ä¸»é¡µå¼€å‘ âœ… å·²å®Œæˆ

| ä»»åŠ¡ | äº§å‡º | å…³è”æ¥å£ | çŠ¶æ€ |
|-----|------|---------|------|
| ä¸­å›½åœ°å›¾é›†æˆ | ECharts åœ°å›¾ç»„ä»¶ | `/api/national/city-prices` | âœ… å·²å®Œæˆ |
| æ•°æ®å¡ç‰‡ | 4ä¸ªç»Ÿè®¡æŒ‡æ ‡å±•ç¤º | `/api/national/overview` | âœ… å·²å®Œæˆ |
| æ’è¡Œæ¦œæ¨¡å— | åŸå¸‚æˆ¿ä»·/æ¶¨å¹…/ç§Ÿå”®æ¯”æ’è¡Œ | `/api/national/ranking` | âœ… å·²å®Œæˆ |
| ç­›é€‰äº¤äº’ | çœä»½ä¸‹æ‹‰ã€ä»·æ ¼ç­›é€‰ã€åŸå¸‚æœç´¢ | `/api/national/provinces`, `/api/national/search` | âœ… å·²å®Œæˆ |
| é¡¶éƒ¨å¯¼èˆª | å›¾æ ‡+æ–‡å­—å¯¼èˆªæ  (PCé€‚é…) | - | âœ… å·²å®Œæˆ |
| è¶‹åŠ¿å›¾è¡¨ | æˆ¿ä»·è¶‹åŠ¿æŠ˜çº¿å›¾ | `/api/national/trend` | âœ… å·²å®Œæˆ |
| å¿«æ·å…¥å£ | åŒ—äº¬åˆ†æã€è¶‹åŠ¿æŠ¥å‘Šç­‰å…¥å£ | - | âœ… å·²å®Œæˆ |

### Phase 4: åŒ—äº¬é¡µé¢å¼€å‘ âœ… å·²å®Œæˆ

| ä»»åŠ¡ | äº§å‡º | å…³è”æ¥å£ | çŠ¶æ€ |
|-----|------|---------|------|
| é¡µé¢æ¨ªå¹… | æ¦‚è§ˆç»Ÿè®¡æ•°æ® | `/api/beijing/overview` | âœ… å·²å®Œæˆ |
| æ ‡ç­¾é¡µå¯¼èˆª | 6ä¸ªåŠŸèƒ½æ ‡ç­¾é¡µ | - | âœ… å·²å®Œæˆ |
| åŒºåŸŸå¯¹æ¯”æ¨¡å— | è¡Œæ”¿åŒºæŸ±çŠ¶å›¾ + æ’ååˆ—è¡¨ | `/api/beijing/district-*` | âœ… å·²å®Œæˆ |
| ç‰¹å¾åˆ†æå›¾è¡¨ | æ¥¼å±‚/æˆ·å‹/æœå‘/ç”µæ¢¯åˆ†æ | `/api/beijing/analysis/*` | âœ… å·²å®Œæˆ |
| æ•£ç‚¹å›¾/ç®±çº¿å›¾ | äº¤äº’å¼æ•°æ®æ¢ç´¢ | `/api/beijing/chart/*` | âœ… å·²å®Œæˆ |
| AI æ¨èç•Œé¢ | è¡¨å• + ç»“æœåˆ—è¡¨ + åŒ¹é…åº¦è¯„åˆ† | `/api/beijing/ai/recommend` | âœ… å·²å®Œæˆ |
| AI å¯¹è¯ UI | èŠå¤©ç•Œé¢ + å¿«æ·é—®é¢˜ | `/api/beijing/ai/chat` | âœ… å·²å®Œæˆ |
| æˆ¿æºåˆ—è¡¨ | ç­›é€‰ + åˆ†é¡µ + æˆ¿æºå¡ç‰‡ | `/api/beijing/houses` | âœ… å·²å®Œæˆ |

### Phase 5: ä¼˜åŒ–ä¸æµ‹è¯• ğŸ”„ è¿›è¡Œä¸­

| ä»»åŠ¡ | äº§å‡º | çŠ¶æ€ |
|-----|------|------|
| é¡¶éƒ¨å¯¼èˆªä¼˜åŒ– | åº•éƒ¨å¯¼èˆªç§»è‡³é¡¶éƒ¨ (PCé€‚é…) | âœ… å·²å®Œæˆ |
| åŠ è½½çŠ¶æ€ | Loading åŠ¨ç”»ã€éª¨æ¶å± | âœ… å·²å®Œæˆ |
| é”™è¯¯å¤„ç† | å¼‚å¸¸æç¤ºã€Toast ç»„ä»¶ | âœ… å·²å®Œæˆ |
| å“åº”å¼é€‚é… | ç§»åŠ¨ç«¯å…¼å®¹ | â¬œ å¾…åç«¯è”è°ƒ |
| æ•´ä½“è”è°ƒ | å‰åç«¯è”è°ƒæµ‹è¯• | â¬œ å¾…åç«¯å®Œæˆ |

---

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
spider_html/
â”œâ”€â”€ index.html          # ä¸»é¡µ (å…¨å›½æ€»è§ˆ)
â”œâ”€â”€ login.html          # ç™»å½•é¡µ
â”œâ”€â”€ beijing.html        # åŒ—äº¬è¯¦æƒ…é¡µ
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ global.css      # å…¨å±€æ ·å¼ + CSSå˜é‡
â”‚   â”œâ”€â”€ login.css       # ç™»å½•é¡µæ ·å¼
â”‚   â”œâ”€â”€ home.css        # ä¸»é¡µæ ·å¼
â”‚   â””â”€â”€ beijing.css     # åŒ—äº¬é¡µæ ·å¼
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ api.js          # API è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ auth.js         # è®¤è¯ç®¡ç†
â”‚   â”œâ”€â”€ charts.js       # ECharts å›¾è¡¨é…ç½®
â”‚   â”œâ”€â”€ login.js        # ç™»å½•é€»è¾‘
â”‚   â”œâ”€â”€ home.js         # ä¸»é¡µé€»è¾‘
â”‚   â”œâ”€â”€ beijing.js      # åŒ—äº¬é¡µé€»è¾‘
â”‚   â””â”€â”€ ai-service.js   # AI æœåŠ¡æ¨¡å—
â””â”€â”€ assets/
    â””â”€â”€ images/         # å›¾ç‰‡èµ„æº
```

---

## âœ… éªŒæ”¶æ ‡å‡†

| é¡µé¢ | éªŒæ”¶æ¡ä»¶ | çŠ¶æ€ |
|-----|---------|------|
| ç™»å½•é¡µ | è°ƒç”¨ç™»å½•æ¥å£æˆåŠŸï¼ŒToken å­˜å‚¨æ­£ç¡®ï¼Œè·³è½¬ä¸»é¡µ | âœ… å‰ç«¯å®Œæˆ |
| ä¸»é¡µ | åœ°å›¾æ•°æ®ä»æ¥å£åŠ è½½ï¼Œç­›é€‰åŠŸèƒ½æ­£å¸¸ï¼Œå¯è·³è½¬åŒ—äº¬é¡µ | âœ… å‰ç«¯å®Œæˆ |
| åŒ—äº¬é¡µ | æ‰€æœ‰å›¾è¡¨æ¥å£å¯¹æ¥å®Œæˆï¼ŒAI æ¨è/å¯¹è¯åŠŸèƒ½å¯ç”¨ | âœ… å‰ç«¯å®Œæˆ |

### ğŸ“¦ å·²å®Œæˆçš„æ–‡ä»¶æ¸…å•

```
é¡µé¢æ–‡ä»¶ (7ä¸ª):
âœ… login.html      - ç™»å½•é¡µé¢ (å·¦å³åˆ†æ ï¼Œå“ç‰Œå±•ç¤º+è¡¨å•)
âœ… register.html   - æ³¨å†Œé¡µé¢ (3æ­¥éª¤æ³¨å†Œæµç¨‹ï¼Œå¯†ç å¼ºåº¦æ£€æµ‹)
âœ… index.html      - ä¸»é¡µ (åœ°å›¾ã€ç»Ÿè®¡å¡ç‰‡ã€æ’è¡Œæ¦œã€è¶‹åŠ¿å›¾)
âœ… beijing.html    - åŒ—äº¬åˆ†æ (6æ ‡ç­¾é¡µï¼šåŒºåŸŸ/ç‰¹å¾/å›¾è¡¨/AIæ¨è/å¯¹è¯/æˆ¿æº)
âœ… report.html     - æ•°æ®æŠ¥å‘Š (æŠ¥å‘Šç±»å‹ã€æŠ¥å‘Šåˆ—è¡¨ã€è‡ªå®šä¹‰æŠ¥å‘Š)
âœ… favorites.html  - æˆ‘çš„æ”¶è— (æ”¶è—æˆ¿æºã€å…³æ³¨åŸå¸‚ã€æ”¶è—æŠ¥å‘Š)
âœ… settings.html   - è®¾ç½®é¡µé¢ (ä¸ªäººä¿¡æ¯ã€å®‰å…¨ã€é€šçŸ¥ã€åå¥½ã€å…³äº)

æ ·å¼æ–‡ä»¶ (8ä¸ª):
âœ… css/global.css    - å…¨å±€æ ·å¼ (CSSå˜é‡ã€ç»„ä»¶ã€å¯¼èˆªã€é¡µè„š)
âœ… css/login.css     - ç™»å½•é¡µæ ·å¼
âœ… css/register.css  - æ³¨å†Œé¡µæ ·å¼
âœ… css/home.css      - ä¸»é¡µæ ·å¼
âœ… css/beijing.css   - åŒ—äº¬é¡µæ ·å¼
âœ… css/report.css    - æ•°æ®æŠ¥å‘Šé¡µæ ·å¼
âœ… css/favorites.css - æˆ‘çš„æ”¶è—é¡µæ ·å¼
âœ… css/settings.css  - è®¾ç½®é¡µæ ·å¼

è„šæœ¬æ–‡ä»¶ (12ä¸ª):
âœ… js/mock-data.js  - æ¨¡æ‹Ÿæ•°æ® (ç”¨äºå‰ç«¯æµ‹è¯•)
âœ… js/api.js        - APIå°è£… (49ä¸ªæ¥å£ + Mockæ”¯æŒ)
âœ… js/auth.js       - è®¤è¯ç®¡ç† (å«é€€å‡ºç™»å½•APIè°ƒç”¨)
âœ… js/charts.js     - EChartså›¾è¡¨é…ç½®
âœ… js/login.js      - ç™»å½•é€»è¾‘
âœ… js/register.js   - æ³¨å†Œé€»è¾‘ (å®Œæ•´APIè°ƒç”¨)
âœ… js/home.js       - ä¸»é¡µé€»è¾‘ (å«åŸå¸‚å…³æ³¨ã€ç³»ç»Ÿé…ç½®)
âœ… js/beijing.js    - åŒ—äº¬é¡µé€»è¾‘ (å«æˆ¿æºæ”¶è—)
âœ… js/ai-service.js - AIæœåŠ¡æ¨¡å—
âœ… js/settings.js   - è®¾ç½®é¡µé€»è¾‘ (ç”¨æˆ·APIè°ƒç”¨)
âœ… js/favorites.js  - æ”¶è—é¡µé€»è¾‘ (æ”¶è—APIè°ƒç”¨)
âœ… js/report.js     - æŠ¥å‘Šé¡µé€»è¾‘ (æŠ¥å‘ŠAPIè°ƒç”¨)
```

---

## ğŸ”— å‚è€ƒèµ„æº

- [Flask RESTful æ–‡æ¡£](https://flask-restful.readthedocs.io/)
- [ECharts å®˜æ–¹æ–‡æ¡£](https://echarts.apache.org/zh/index.html)
- [ECharts ä¸­å›½åœ°å›¾ç¤ºä¾‹](https://echarts.apache.org/examples/zh/index.html#chart-type-map)
- [Fetch API MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API)

---

*æ–‡æ¡£ç‰ˆæœ¬: v2.0 | æœ€åæ›´æ–°: 2024-12-10*
