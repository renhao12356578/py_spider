<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>全国房产数据总览 - 房产数据分析系统</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <!-- ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <!-- ECharts 中国地图 -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/home.css">
</head>
<body>
  <div class="home-page">
    <!-- 顶部导航 -->
    <header class="header">
      <div class="header-content">
        <div class="header-logo">
          <span class="logo-icon">🏠</span>
          <span>房析</span>
        </div>
        
        <nav class="header-nav">
          <a href="index.html" class="header-nav-item active">
            <i data-lucide="home"></i>
            <span>首页</span>
          </a>
          <a href="beijing.html" class="header-nav-item">
            <i data-lucide="building"></i>
            <span>北京分析</span>
          </a>
          <a href="report.html" class="header-nav-item">
            <i data-lucide="file-text"></i>
            <span>数据报告</span>
          </a>
          <a href="favorites.html" class="header-nav-item">
            <i data-lucide="heart"></i>
            <span>我的收藏</span>
          </a>
          <a href="settings.html" class="header-nav-item">
            <i data-lucide="settings"></i>
            <span>设置</span>
          </a>
        </nav>
        
        <div class="header-actions">
          <button class="btn btn-secondary btn-sm" id="userBtn">
            <i data-lucide="user"></i>
            <span id="userDisplay">用户</span>
          </button>
          <button class="btn btn-outline btn-sm" id="logoutBtn">退出</button>
        </div>
      </div>
    </header>
    
    <!-- 横幅区域 -->
    <section class="home-banner">
      <div class="banner-content">
        <h1 class="banner-title">🏠 全国房产数据总览</h1>
        <p class="banner-subtitle">实时掌握全国 300+ 城市房价动态，数据驱动置业决策</p>
        
        <div class="search-container">
          <i data-lucide="search" class="search-icon"></i>
          <input 
            type="text" 
            class="search-input" 
            id="citySearch"
            placeholder="搜索城市，如：北京、上海、深圳..."
            autocomplete="off"
          >
          <button class="search-btn" id="searchBtn">搜索</button>
          
          <!-- 搜索结果下拉 -->
          <div class="search-dropdown" id="searchDropdown">
            <!-- 动态填充 -->
          </div>
        </div>
      </div>
    </section>
    
    <!-- 主内容区 -->
    <main class="home-main">
      <!-- 统计卡片 -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i data-lucide="building-2"></i>
          </div>
          <div class="stat-value" id="statAvgPrice">--</div>
          <div class="stat-label">全国平均房价 (元/㎡)</div>
          <div class="stat-change up" id="statAvgPriceChange">
            <i data-lucide="trending-up"></i>
            <span>+2.3%</span>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">
            <i data-lucide="arrow-up-circle"></i>
          </div>
          <div class="stat-value" id="statHighestPrice">--</div>
          <div class="stat-label">最高房价城市</div>
          <div class="stat-change" id="statHighestCity">
            <span class="text-muted">--</span>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">
            <i data-lucide="arrow-down-circle"></i>
          </div>
          <div class="stat-value" id="statLowestPrice">--</div>
          <div class="stat-label">最低房价城市</div>
          <div class="stat-change" id="statLowestCity">
            <span class="text-muted">--</span>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">
            <i data-lucide="home"></i>
          </div>
          <div class="stat-value" id="statTotalListings">--</div>
          <div class="stat-label">总挂牌房源数</div>
          <div class="stat-change" id="statTotalCities">
            <span class="text-muted">覆盖 -- 个城市</span>
          </div>
        </div>
      </div>
      
      <!-- 主内容布局 -->
      <div class="content-grid">
        <!-- 左侧地图 -->
        <div class="map-card">
          <div class="card-header">
            <h3 class="card-title">
              <i data-lucide="map"></i>
              <span>全国房价分布地图</span>
            </h3>
            <div class="filter-group">
              <select class="filter-select" id="provinceFilter">
                <option value="">全部省份</option>
              </select>
              <select class="filter-select" id="priceRangeFilter">
                <option value="">全部价格</option>
                <option value="0-10000">1万以下</option>
                <option value="10000-20000">1-2万</option>
                <option value="20000-30000">2-3万</option>
                <option value="30000-50000">3-5万</option>
                <option value="50000-999999">5万以上</option>
              </select>
            </div>
          </div>
          <div class="map-container" id="chinaMap">
            <!-- 地图图例 -->
            <div class="map-legend">
              <div class="legend-title">房价区间 (元/㎡)</div>
              <div class="legend-items">
                <div class="legend-item">
                  <div class="legend-color level-1"></div>
                  <span>&lt;1万</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color level-2"></div>
                  <span>1-2万</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color level-3"></div>
                  <span>2-3万</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color level-4"></div>
                  <span>3-5万</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color level-5"></div>
                  <span>&gt;5万</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 右侧边栏 -->
        <div class="sidebar">
          <!-- 城市排行榜 -->
          <div class="ranking-card">
            <div class="card-header">
              <h3 class="card-title">
                <i data-lucide="trophy"></i>
                <span>城市房价排行</span>
              </h3>
              <div class="ranking-tabs">
                <button class="ranking-tab active" data-type="price">房价</button>
                <button class="ranking-tab" data-type="change">涨幅</button>
                <button class="ranking-tab" data-type="rent_ratio">租售比</button>
              </div>
            </div>
            <div class="ranking-list" id="rankingList">
              <!-- 动态填充 -->
              <div class="loading">
                <div class="loading-spinner"></div>
              </div>
            </div>
          </div>
          
          <!-- 快捷入口 -->
          <div class="quick-access-card">
            <h3 class="quick-access-title">
              <i data-lucide="zap"></i>
              <span>快捷入口</span>
            </h3>
            <div class="quick-access-grid">
              <a href="beijing.html" class="quick-item">
                <div class="quick-icon">
                  <i data-lucide="building"></i>
                </div>
                <span class="quick-label">北京分析</span>
              </a>
              <a href="#" class="quick-item">
                <div class="quick-icon">
                  <i data-lucide="bar-chart-2"></i>
                </div>
                <span class="quick-label">趋势报告</span>
              </a>
              <a href="#" class="quick-item">
                <div class="quick-icon">
                  <i data-lucide="brain"></i>
                </div>
                <span class="quick-label">AI 推荐</span>
              </a>
              <a href="#" class="quick-item">
                <div class="quick-icon">
                  <i data-lucide="heart"></i>
                </div>
                <span class="quick-label">我的收藏</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 趋势图 -->
      <div class="trend-card">
        <div class="card-header">
          <h3 class="card-title">
            <i data-lucide="trending-up"></i>
            <span>房价趋势分析</span>
          </h3>
          <div class="filter-group">
            <select class="filter-select" id="trendCityFilter">
              <option value="北京">北京</option>
              <option value="上海">上海</option>
              <option value="广州">广州</option>
              <option value="深圳">深圳</option>
            </select>
            <!-- ✅ 新增年份筛选 -->
            <select class="filter-select" id="trendYearFilter">
              <option value="2025">2025年</option>
              <option value="2024">2024年</option>
              <option value="2023">2023年</option>
              <option value="2022">2022年</option>
              <option value="2021">2021年</option>
              <option value="2020">2020年</option>
              <option value="2019">2019年</option>
              <option value="2018">2018年</option>
              <option value="2017">2017年</option>
            </select>
          </div>
        </div>
        <div class="trend-chart" id="trendChart"></div>
      </div>
    </main>
    
    <!-- 页脚 -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-info">
          <span class="footer-logo">🏠 房析</span>
          <span class="footer-copyright">© 2024 房产数据分析系统. All rights reserved.</span>
        </div>
        <div class="footer-links">
          <a href="#">关于我们</a>
          <a href="#">使用条款</a>
          <a href="#">隐私政策</a>
          <a href="#">联系我们</a>
        </div>
      </div>
    </footer>
  </div>
  
  <!-- Scripts -->
  <script src="js/mock-data.js"></script>
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/home.js"></script>
  <script>
    // 初始化 Lucide 图标
    lucide.createIcons();
  </script>
</body>
</html>

